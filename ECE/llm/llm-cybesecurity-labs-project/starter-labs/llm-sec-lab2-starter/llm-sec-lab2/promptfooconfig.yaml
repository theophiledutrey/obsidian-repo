$schema: https://promptfoo.dev/config-schema.json
description: 'Lab 2 eval: naÃ¯ve vs secure-review prompt on seeded snippets'
providers:
- id: google:gemini-2.5-flash
  config:
    apiKey: ${GEMINI_API_KEY}
- id: google:gemini-2.5-pro
  config:
    apiKey: ${GEMINI_API_KEY}
prompts:
- file://prompts/baseline_prompt.txt
- file://prompts/secure_review_prompt.txt
defaultTest:
  assert:
  - type: is-json
    metric: json
  - type: javascript
    metric: accuracy
    value: '(() => { try { const obj = JSON.parse(output); return (obj.is_vuln||'''').toLowerCase()
      === (vars.label||'''').toLowerCase() ? 1 : 0; } catch(e) { return 0; } })()'
tests: file://_generated/tests.yaml
evaluateOptions:
  maxConcurrency: 3
  delay: 500
